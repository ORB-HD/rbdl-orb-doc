<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rigid Body Dynamics Library: $title</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rigid Body Dynamics Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d5/d90/_casadi.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="contents">
<div class="textblock"><p>RBDL comes in two flavors which only differ in what mathematical backend they use. Casadi is a very interesting backend, because it has some unique features such as alogrithmic differentiation. But due to its complexity it is not the default.</p>
<p>This page documents how to use the casadi version of RBDL. If you are unsure if you need casadi then you probably don't and should stick to the standart RBDL that uses Eigen as it's backend. For more information about casadi take a look at their <a href="https://web.casadi.org/">website </a>.</p>
<p>The casadi_simple example shows how to build a simple application that uses casadi:</p>
<p>CMakeLists.txt: note that the FindCasadi.cmake file is also required to find the correct include paths for casadi </p><div class="fragment"><div class="line">PROJECT (RBDLCasadiExample CXX)</div>
<div class="line"> </div>
<div class="line">CMAKE_MINIMUM_REQUIRED(VERSION 3.0)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># We need to add the project source path to the CMake module path so that</span></div>
<div class="line"><span class="preprocessor"># the FindRBDL.cmake script can be found.</span></div>
<div class="line">LIST( APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR} )</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">SET(CUSTOM_RBDL_PATH <span class="stringliteral">&quot;&quot;</span> CACHE PATH <span class="stringliteral">&quot;Path to specific RBDL Installation&quot;</span>)</div>
<div class="line"><span class="preprocessor"># Search for the RBDL include directory and library</span></div>
<div class="line">FIND_PACKAGE (Casadi REQUIRED)</div>
<div class="line">FIND_PACKAGE (RBDLCasadi REQUIRED)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Add the include directory to the include paths</span></div>
<div class="line">INCLUDE_DIRECTORIES (</div>
<div class="line">  ${RBDLCasadi_INCLUDE_DIR}</div>
<div class="line">  ${Casadi_INCLUDE_DIR}</div>
<div class="line">  ${Casadi_INCLUDE_DIR}/..</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Create an executable</div>
<div class="line">ADD_EXECUTABLE (casadi_example example.cc)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># And link the library against the executable</span></div>
<div class="line">TARGET_LINK_LIBRARIES (casadi_example</div>
<div class="line">  ${Casadi_LIBRARY}</div>
<div class="line">  ${RBDLCasadi_LIBRARY}</div>
<div class="line">  )</div>
</div><!-- fragment --><p>A simple rbdl example source file that works with casadi: </p><div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * RBDL - Rigid Body Dynamics Library</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2011-2016 Martin Felis &lt;martin@fysx.org&gt;</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Licensed under the zlib license. See LICENSE for more details.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d2/d18/rbdl_8h.html">rbdl/rbdl.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="../../dd/d16/namespace_rigid_body_dynamics.html">RigidBodyDynamics</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html">RigidBodyDynamics::Math</a>;</div>
<div class="line"> </div>
<div class="line">casadi::MX fd(Model&amp; model, <span class="keyword">const</span> <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a>&amp; Q, <span class="keyword">const</span> <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a>&amp; Qdot, <span class="keyword">const</span> <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a>&amp; Tau){</div>
<div class="line">    <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a> Qddot(model.dof_count);</div>
<div class="line">    <a class="code" href="../../d6/d63/group__dynamics__group.html#gab0a1893d35ea090e594166a97bdda616">ForwardDynamics</a> (model, Q, Qdot, Tau, Qddot);</div>
<div class="line">    <span class="keywordflow">return</span> Qddot;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">  <a class="code" href="../../d9/deb/rbdl__version_8cc.html#a9ef31a60edd5549327e8a00554363d17">rbdl_check_api_version</a> (RBDL_API_VERSION);</div>
<div class="line"> </div>
<div class="line">  Model* model = NULL;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> body_a_id, body_b_id, body_c_id;</div>
<div class="line">  Body body_a, body_b, body_c;</div>
<div class="line">  Joint joint_a, joint_b, joint_c;</div>
<div class="line"> </div>
<div class="line">  model = <span class="keyword">new</span> Model();</div>
<div class="line"> </div>
<div class="line">  model-&gt;gravity = <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0., -9.81, 0.);</div>
<div class="line"> </div>
<div class="line">  body_a = Body (1., <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0.5, 0., 0.0), <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (1., 1., 1.));</div>
<div class="line">    joint_a = Joint(</div>
<div class="line">    JointTypeRevolute,</div>
<div class="line">    <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0., 0., 1.)</div>
<div class="line">  );</div>
<div class="line">  </div>
<div class="line">  body_a_id = model-&gt;AddBody(0, <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a59f1033376c57c4d65b701ec497deb18">Xtrans</a>(<a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a>(0., 0., 0.)), joint_a, body_a);</div>
<div class="line">  </div>
<div class="line">  body_b = Body (1., <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0., 0.5, 0.), <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (1., 1., 1.));</div>
<div class="line">    joint_b = Joint (</div>
<div class="line">    JointTypeRevolute,</div>
<div class="line">    <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0., 0., 1.)</div>
<div class="line">  );</div>
<div class="line">  </div>
<div class="line">  body_b_id = model-&gt;AddBody(body_a_id, <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a59f1033376c57c4d65b701ec497deb18">Xtrans</a>(<a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a>(1., 0., 0.)), joint_b, body_b);</div>
<div class="line">  </div>
<div class="line">  body_c = Body (0., <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0.5, 0., 0.), <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (1., 1., 1.));</div>
<div class="line">    joint_c = Joint (</div>
<div class="line">    JointTypeRevolute,</div>
<div class="line">    <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a> (0., 0., 1.)</div>
<div class="line">  );</div>
<div class="line">  </div>
<div class="line">  body_c_id = model-&gt;AddBody(body_b_id, <a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a59f1033376c57c4d65b701ec497deb18">Xtrans</a>(<a class="code" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">Vector3d</a>(0., 1., 0.)), joint_c, body_c);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> Q_sym = VectorNd::sym (<span class="stringliteral">&quot;Q&quot;</span>, model-&gt;dof_count);</div>
<div class="line">  <span class="keyword">auto</span> QDot_sym = VectorNd::sym (<span class="stringliteral">&quot;QDot&quot;</span>, model-&gt;dof_count);</div>
<div class="line">  <span class="keyword">auto</span> Tau_sym = VectorNd::sym (<span class="stringliteral">&quot;Tau&quot;</span>, model-&gt;dof_count);</div>
<div class="line">  <a class="code" href="../../d7/dbd/namespace_rigid_body_dynamics_1_1_addons_1_1_geometry.html#abf8317e15b6c2378c615894e208028a5">casadi::Function</a> fd_fun = <a class="code" href="../../d7/dbd/namespace_rigid_body_dynamics_1_1_addons_1_1_geometry.html#abf8317e15b6c2378c615894e208028a5">casadi::Function</a>(<span class="stringliteral">&quot;fd_fun&quot;</span>, {Q_sym, QDot_sym, Tau_sym}, {fd (*model, Q_sym, QDot_sym, Tau_sym)}, {<span class="stringliteral">&quot;Q&quot;</span>, <span class="stringliteral">&quot;QDot&quot;</span>, <span class="stringliteral">&quot;Tau&quot;</span>}, {<span class="stringliteral">&quot;QDDot&quot;</span>}).expand();</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> Q = casadi::DM::zeros (model-&gt;dof_count);</div>
<div class="line">  <span class="keyword">auto</span> QDot = casadi::DM::zeros (model-&gt;dof_count);</div>
<div class="line">  <span class="keyword">auto</span> Tau = casadi::DM::zeros (model-&gt;dof_count);</div>
<div class="line">  casadi::DM QDDot = fd_fun(casadi::DMDict{ {<span class="stringliteral">&quot;Q&quot;</span>, Q}, {<span class="stringliteral">&quot;QDot&quot;</span>, QDot}, {<span class="stringliteral">&quot;Tau&quot;</span>, Tau} }).at(<span class="stringliteral">&quot;QDDot&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; QDDot &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">delete</span> model;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="agroup__dynamics__group_html_gab0a1893d35ea090e594166a97bdda616"><div class="ttname"><a href="../../d6/d63/group__dynamics__group.html#gab0a1893d35ea090e594166a97bdda616">RigidBodyDynamics::ForwardDynamics</a></div><div class="ttdeci">RBDL_DLLAPI void ForwardDynamics(Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDot, const Math::VectorNd &amp;Tau, Math::VectorNd &amp;QDDot, std::vector&lt; Math::SpatialVector &gt; *f_ext=NULL)</div><div class="ttdoc">Computes forward dynamics with the Articulated Body Algorithm.</div></div>
<div class="ttc" id="anamespace_rigid_body_dynamics_1_1_addons_1_1_geometry_html_abf8317e15b6c2378c615894e208028a5"><div class="ttname"><a href="../../d7/dbd/namespace_rigid_body_dynamics_1_1_addons_1_1_geometry.html#abf8317e15b6c2378c615894e208028a5">RigidBodyDynamics::Addons::Geometry::Function</a></div><div class="ttdeci">Function_&lt; double &gt; Function</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc1/_function_8h_source.html#l00130">Function.h:130</a></div></div>
<div class="ttc" id="anamespace_rigid_body_dynamics_1_1_math_html"><div class="ttname"><a href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html">RigidBodyDynamics::Math</a></div><div class="ttdoc">Math types such as vectors and matrices and utility functions.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d59/rbdl__mathutils_8cc_source.html#l00020">rbdl_mathutils.cc:20</a></div></div>
<div class="ttc" id="anamespace_rigid_body_dynamics_1_1_math_html_a2cf580002219c9abf187ceb3d4021785"><div class="ttname"><a href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">RigidBodyDynamics::Math::VectorNd</a></div><div class="ttdeci">VectorN_t VectorNd</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6f/rbdl__math_8h_source.html#l00066">rbdl_math.h:66</a></div></div>
<div class="ttc" id="anamespace_rigid_body_dynamics_1_1_math_html_a59f1033376c57c4d65b701ec497deb18"><div class="ttname"><a href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a59f1033376c57c4d65b701ec497deb18">RigidBodyDynamics::Math::Xtrans</a></div><div class="ttdeci">SpatialTransform Xtrans(const Vector3d &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00396">SpatialAlgebraOperators.h:396</a></div></div>
<div class="ttc" id="anamespace_rigid_body_dynamics_1_1_math_html_a7767bdaca432311831fb667184fb65d5"><div class="ttname"><a href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a7767bdaca432311831fb667184fb65d5">RigidBodyDynamics::Math::Vector3d</a></div><div class="ttdeci">Vector3_t Vector3d</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6f/rbdl__math_8h_source.html#l00057">rbdl_math.h:57</a></div></div>
<div class="ttc" id="anamespace_rigid_body_dynamics_html"><div class="ttname"><a href="../../dd/d16/namespace_rigid_body_dynamics.html">RigidBodyDynamics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d03/_joint_8cc_source.html#l00018">Joint.cc:18</a></div></div>
<div class="ttc" id="arbdl_8h_html"><div class="ttname"><a href="../../d2/d18/rbdl_8h.html">rbdl.h</a></div></div>
<div class="ttc" id="arbdl__version_8cc_html_a9ef31a60edd5549327e8a00554363d17"><div class="ttname"><a href="../../d9/deb/rbdl__version_8cc.html#a9ef31a60edd5549327e8a00554363d17">rbdl_check_api_version</a></div><div class="ttdeci">RBDL_DLLAPI void rbdl_check_api_version(int version)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/deb/rbdl__version_8cc_source.html#l00020">rbdl_version.cc:20</a></div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 23 2021 12:29:42 for Rigid Body Dynamics Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
